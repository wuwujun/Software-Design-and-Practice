# 红黑树 #

## 介绍 ##
    红黑树是一种自平衡二叉查找树，它的基本要求是：
    所有节点都有两个子节点，尽管其中的一个或两个可能是空叶子。
    1. 节点是红色或黑色。
    2. 根是黑色。
    3. 所有叶子都是黑色（叶子是NIL节点）。
    4. 每个红色节点必须有两个黑色的子节点。（从每个叶子到根的所有路径上不能有两个连续的红色节点。）
    5. 从任一节点到其每个叶子的所有简单路径都包含相同数目的黑色节点。
    
>   "它是复杂的，但它的操作有着良好的最坏情况运行时间，并且在实践中是高效的：
    它可以在O(logn)时间内做查找，插入和删除，这里的n是树中元素的数目。"

## 数据结构 ##
```c
struct node
{
	int color;                  
	datatype data;
	struct node * lchild;
	struct node * rchild;
	struct node * parent;       
};
typedef struct node * tree;
```

## 红黑树的几个基本操作 ##
### 插入 ###
    以二叉查找树的方法插入节点，然后再处理使其满足红黑树的性质要求：
    
    每个待插入节点都预先标记为红色 -> 出现两个连续红色节点的冲突 -> 颜色调换和树旋转 -> 根据其他临近节点的颜色决定下一步操作
    
    具体有如下五种情况：
    
>    
    【1】情况1：新节点没有父节点，即它为根节点
    【2】情况2：新节点的父节点P是黑色
>    
    新节点的父节点P是红色情况下【3】【4】【5】：
    【3】情况3：叔父节点U也是红色
>    
    叔父节点U是黑色或者缺少的情况下【4】【5】：
    【4】情况四：
        父节点P是祖父节点G的左儿子，新节点N是父节点P的右儿子【LR】
        父节点P是祖父节点G的右儿子，新节点N是父节点P的左儿子【RL】
    【5】情况五：
        新节点N是父节点P的左儿子，父节点P是祖父节点G的左儿子
        新节点N是父节点P的右儿子，父节点P是祖父节点G的右儿子
    
### 删除 ###
    根据二叉查找树的删除方法删除，再通过调整颜色和旋转来保持红黑树的性质：
    【这里讨论的儿子是非叶节点】
    
    1. 要删除的节点有两个儿子 -> 转化成另一个只有一个儿子的节点情况 -> 用右子树中最左节点作为继承节点 
    -> 交换继承节点和要删除节点的值 -> 删除继承节点【继承节点只有一个儿子】-> 2
    【要删除的节点本身只有一个儿子，直接按照 2 处理】

    2. 所以此处只需要讨论删除只有一个儿子的节点：
      （如果它两个儿子都为空，即均为叶子，任意将其中一个NULL看作儿子，但是这种情况需要在2.3中单独处理）
    
        2.1 ->要删除的节点是根节点且树只有根节点这一个节点
	              ->按照二叉查找树的删除规则处理【根节点不需要调整颜色】
	         
        2.2 ->要删除的节点是根节点且根节点有左儿子或者右儿子
	              ->按照二叉查找树的删除规则处理
	         
        2.3 ->要删除的节点是smallest或者不是根节点的仅有一个儿子的节点：
	              ->按照二叉查找树的删除规则处理然后调整颜色和旋转：
	              
		                2.3.1 ->删除的节点是红色：只需要用黑色儿子替换它即可
		                2.3.2 ->删除的节点是黑色，且儿子是红色：用儿子替换它，并且重绘儿子为黑色
		                2.3.3 ->删除的节点是黑色，且儿子都是黑色：
		   
			                    【1】情况1：父亲是黑色，兄弟是红色，兄弟儿子都是黑色
			                    【2】情况2：父亲是黑色，兄弟是黑色，兄弟的儿子都是黑色【跳到4\5】
			                    【3】情况3：父亲是红色，兄弟是黑色，兄弟的儿子都是黑色【跳到4\5】
			                    【4】情况4：兄弟是黑色，兄弟的左儿子是红色，右儿子为黑色或空
			                    【5】情况5：兄弟是黑色，兄弟的右儿子是红色，左儿子为黑色或空
			
### 查找 ###
    和二叉查找树的查找一样
    
## 查找性能分析 ##
    红黑树是一种动态查找树。
    
    红黑树在插入和删除上具有极大优势，因为红黑树插入只需要两次旋转，删除至多三次旋转。
    虽然比之红黑树，AVL树的结构高度平衡，但是维护起来（删除的时候）比红黑树要复杂。
    所以，如果数据是动态的，经常会有增删操作，此时的查找结构使用红黑树就会比较好。
    
    但是和跳表相比，
    
## 参考文献 ##

  [红黑树 维基百科](https://zh.wikipedia.org/wiki/%E7%BA%A2%E9%BB%91%E6%A0%91)
